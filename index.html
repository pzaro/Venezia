<!DOCTYPE html>
<html lang="el">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Î’ÎµÎ½ÎµÏ„Î¯Î±: Dousis Guide</title>
    <style>
        /* CSS STYLES */
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; background: #f4f4f9; color: #333; margin: 0; padding-bottom: 60px; }
        
        .header { background: white; position: sticky; top: 0; z-index: 900; box-shadow: 0 4px 6px rgba(0,0,0,0.05); padding: 10px 0; }
        h1 { text-align: center; color: #b71c1c; margin: 5px 0; font-size: 1.3rem; }
        
        .filters-wrapper { display: flex; flex-direction: column; gap: 8px; }
        .scroll-container { display: flex; overflow-x: auto; gap: 8px; padding: 0 15px; scrollbar-width: none; -webkit-overflow-scrolling: touch; }
        .scroll-container::-webkit-scrollbar { display: none; }
        
        .btn-filter { flex: 0 0 auto; padding: 8px 15px; border-radius: 20px; border: 1px solid #ddd; background: #f9f9f9; font-size: 0.85rem; color: #555; cursor: pointer; }
        .btn-filter.active { background: #b71c1c; color: white; border-color: #b71c1c; }
        .date-btn.active { background: #2c3e50; border-color: #2c3e50; }

        .container { max-width: 600px; margin: 0 auto; padding: 15px; }
        .card { background: white; border-radius: 12px; padding: 15px; margin-bottom: 15px; border-left: 5px solid #b71c1c; box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
        
        .category-tag { font-size: 0.75rem; font-weight: 700; text-transform: uppercase; color: #b71c1c; }
        .name { font-size: 1.2rem; font-weight: 800; margin: 5px 0; color: #222; }
        
        /* ÎÎ•ÎŸ Î£Î¤Î¥Î› Î“Î™Î‘ Î‘Î ÎŸÎ£Î¤Î‘Î£Î— */
        .distance-tag { font-size: 0.9rem; color: #555; font-weight: normal; display: block; margin-bottom: 5px; }
        
        .meta-info { display: flex; gap: 10px; margin-top: 8px; font-size: 0.9rem; }
        .time-badge { background: #333; color: white; padding: 2px 6px; border-radius: 4px; font-weight: bold; font-size: 0.8rem; }
        .cost-badge { background: #e0f2f1; color: #00695c; padding: 2px 6px; border-radius: 4px; font-weight: bold; font-size: 0.8rem; }
        
        .tip { background: #fff8e1; color: #f57f17; padding: 8px; border-radius: 6px; margin-top: 10px; font-style: italic; font-size: 0.9rem; border-left: 3px solid #ffca28; }

        .card-actions { display: flex; gap: 10px; margin-top: 12px; }
        .action-btn { flex: 1; padding: 10px; border-radius: 8px; text-align: center; font-weight: bold; text-decoration: none; font-size: 0.9rem; cursor: pointer; border: none; }
        .map-btn { background: white; color: #b71c1c; border: 2px solid #b71c1c; }
        .info-btn { background: #b71c1c; color: white; display: flex; align-items: center; justify-content: center; gap: 5px; }

        /* MODAL */
        .modal-overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.6); z-index: 2000; align-items: flex-end; justify-content: center; }
        .modal-content { background: white; width: 100%; max-width: 600px; border-radius: 20px 20px 0 0; padding: 25px; max-height: 85vh; overflow-y: auto; animation: slideUp 0.3s ease-out; }
        .modal-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; border-bottom: 1px solid #eee; padding-bottom: 10px; }
        .modal-title { font-size: 1.4rem; font-weight: bold; color: #b71c1c; margin: 0; }
        .close-btn { background: none; border: none; font-size: 2rem; color: #888; cursor: pointer; }
        .modal-body { font-size: 1rem; line-height: 1.6; color: #444; white-space: pre-line; }
        .audio-controls { margin-top: 20px; display: flex; gap: 10px; border-top: 1px solid #eee; padding-top: 15px; }
        .speak-btn { background: #2c3e50; color: white; }
        .stop-btn { background: #e74c3c; color: white; display: none; }
        
        @keyframes slideUp { from { transform: translateY(100%); } to { transform: translateY(0); } }
    </style>
</head>
<body>

    <div class="header">
        <h1>ğŸ‡®ğŸ‡¹ Venice: Digital Guide</h1>
        <div class="filters-wrapper">
            <div class="scroll-container">
                <button class="btn-filter date-btn active" onclick="filterData('day', 0)">ÎŒÎ»Î±</button>
                <button class="btn-filter date-btn" onclick="filterData('day', 1)">Î”ÎµÏ… 12/1</button>
                <button class="btn-filter date-btn" onclick="filterData('day', 2)">Î¤ÏÎ¹ 13/1</button>
                <button class="btn-filter date-btn" onclick="filterData('day', 3)">Î¤ÎµÏ„ 14/1</button>
                <button class="btn-filter date-btn" onclick="filterData('day', 4)">Î ÎµÎ¼ 15/1</button>
                <button class="btn-filter date-btn" onclick="filterData('day', 5)">Î Î±Ï 16/1</button>
                <button class="btn-filter date-btn" onclick="filterData('day', 6)">Î£Î±Î² 17/1</button>
            </div>
            <div class="scroll-container">
                <button class="btn-filter active" onclick="filterData('cat', 'all')">ÎŒÎ»Î±</button>
                <button class="btn-filter" onclick="filterData('cat', 'Ï€ÏÏ‰Î¹')">ğŸŒ… Î ÏÏ‰Î¯</button>
                <button class="btn-filter" onclick="filterData('cat', 'Î¼ÎµÏƒÎ·Î¼ÎµÏÎ¹')">ğŸ¥ª ÎœÎµÏƒÎ·Î¼Î­ÏÎ¹</button>
                <button class="btn-filter" onclick="filterData('cat', 'Î²ÏÎ±Î´Ï…')">ğŸ· Î’ÏÎ¬Î´Ï…</button>
            </div>
        </div>
    </div>

    <div class="container" id="content"></div>

    <div id="infoModal" class="modal-overlay" onclick="closeModal(event)">
        <div class="modal-content" onclick="event.stopPropagation()">
            <div class="modal-header">
                <h2 id="modalTitle" class="modal-title"></h2>
                <button class="close-btn" onclick="closeModal()">Ã—</button>
            </div>
            <div id="modalBody" class="modal-body"></div>
            <div class="audio-controls">
                <button id="speakBtn" class="action-btn speak-btn" onclick="startSpeaking()">ğŸ”Š Î‘ÎºÏÏŒÎ±ÏƒÎ·</button>
                <button id="stopBtn" class="action-btn stop-btn" onclick="stopSpeaking()">â¹ï¸ Stop</button>
            </div>
        </div>
    </div>

    <script>
        let allData = [];
        let currentDisplayData = [];
        let currentDay = 0;
        let currentCat = 'all';
        let currentTextToSpeak = "";
        const synth = window.speechSynthesis;

        fetch('locations.json')
            .then(res => res.json())
            .then(data => { allData = data; render(); })
            .catch(err => console.error("Error:", err));

        function filterData(type, value) {
            if (type === 'day') {
                currentDay = value;
                document.querySelectorAll('.date-btn').forEach(b => b.classList.remove('active'));
            } else {
                currentCat = value;
                document.querySelectorAll('.btn-filter:not(.date-btn)').forEach(b => b.classList.remove('active'));
            }
            event.target.classList.add('active');
            render();
        }

        function render() {
            const container = document.getElementById('content');
            container.innerHTML = '';

            currentDisplayData = allData.filter(item => {
                const dayMatch = currentDay === 0 || (item.days && item.days.includes(currentDay));
                let catMatch = true;
                if (currentCat !== 'all') catMatch = item.category.toLowerCase().includes(currentCat);
                return dayMatch && catMatch;
            });

            if (currentDisplayData.length === 0) {
                container.innerHTML = '<div style="text-align:center; padding:20px; color:#777;">ÎšÎ±Î½Î­Î½Î± Ï€ÏÏŒÎ³ÏÎ±Î¼Î¼Î±.</div>';
                return;
            }

            currentDisplayData.forEach((item, index) => {
                // Î•Î¼Ï†Î¬Î½Î¹ÏƒÎ· Î‘Ï€ÏŒÏƒÏ„Î±ÏƒÎ·Ï‚ (Î±Î½ Ï…Ï€Î¬ÏÏ‡ÎµÎ¹)
                const distanceHtml = item.distance ? `<span class="distance-tag">ğŸ‘£ Î‘Ï€ÏŒ Pesaro: <b>${item.distance}</b></span>` : '';

                container.innerHTML += `
                    <div class="card">
                        <div class="category-tag">${item.category}</div>
                        <div class="name">${item.name}</div>
                        ${distanceHtml}
                        <div class="meta-info">
                            <span class="time-badge">ğŸ•’ ${item.time || '-'}</span>
                            <span class="cost-badge">ğŸ’° ${item.cost}</span>
                        </div>
                        <div class="tip">ğŸ’¡ ${item.tip}</div>
                        <div class="card-actions">
                            <button class="action-btn info-btn" onclick="openModal(${index})">â„¹ï¸ Info</button>
                            <a href="${item.mapUrl}" target="_blank" class="action-btn map-btn">ğŸ“ Î§Î¬ÏÏ„Î·Ï‚</a>
                        </div>
                    </div>
                `;
            });
        }

        function openModal(index) {
            const item = currentDisplayData[index];
            if (!item) return;
            document.getElementById('modalTitle').innerText = item.name;
            document.getElementById('modalBody').innerText = item.description || item.tip;
            currentTextToSpeak = item.description || item.tip;
            document.getElementById('infoModal').style.display = 'flex';
            stopSpeaking();
        }

        function closeModal() {
            document.getElementById('infoModal').style.display = 'none';
            stopSpeaking();
        }

        function startSpeaking() {
            if (synth.speaking) return;
            if (currentTextToSpeak) {
                const utterThis = new SpeechSynthesisUtterance(currentTextToSpeak);
                utterThis.lang = 'el-GR';
                utterThis.rate = 0.9;
                utterThis.onend = () => toggleAudioButtons(false);
                synth.speak(utterThis);
                toggleAudioButtons(true);
            }
        }

        function stopSpeaking() {
            if (synth.speaking) synth.cancel();
            toggleAudioButtons(false);
        }

        function toggleAudioButtons(isSpeaking) {
            document.getElementById('speakBtn').style.display = isSpeaking ? 'none' : 'inline-block';
            document.getElementById('stopBtn').style.display = isSpeaking ? 'inline-block' : 'none';
        }
    </script>
<div style="margin-top: 30px; padding: 20px; background-color: #f0f8ff; border-top: 2px solid #007bff; font-family: sans-serif;">
    <h2 style="color: #0056b3;">ğŸš† ÎœÎµÏ„Î±Ï†Î¿ÏÎ­Ï‚ & Î©ÏÎ¬ÏÎ¹Î±</h2>
    
    <div id="transport-data">
        </div>

    <script>
        // Î¤Î± Î´ÎµÎ´Î¿Î¼Î­Î½Î± Ï€Î¿Ï… Ï†Ï„Î¹Î¬Î¾Î±Î¼Îµ
        const transportSchedule = {
            trevisoBus: {
                title: "âœˆï¸ Î‘ÎµÏÎ¿Î´ÏÏŒÎ¼Î¹Î¿ Treviso (ATVO)",
                desc: "Î›ÎµÏ‰Ï†Î¿ÏÎµÎ¯Î¿ Express Ï€ÏÎ¿Ï‚ Piazzale Roma",
                time: "Î”Î¹Î¬ÏÎºÎµÎ¹Î±: ~60'",
                note: "Î‘Î½Î±Ï‡Ï‰ÏÎµÎ¯ Î¼ÎµÏ„Î¬ Î±Ï€ÏŒ ÎºÎ¬Î¸Îµ Ï€Ï„Î®ÏƒÎ·. Î•Î¹ÏƒÎ¹Ï„Î®ÏÎ¹Î¿ ÏƒÏ„Î¿ Ï‡Î­ÏÎ¹ Î® online."
            },
            vaporetto: {
                title: "ğŸš¤ Î’Î±Ï€Î¿ÏÎ­Ï„Î¿ (Î“ÏÎ±Î¼Î¼Î® 1)",
                desc: "Piazzale Roma -> Ca' d'Oro (ÎÎµÎ½Î¿Î´Î¿Ï‡ÎµÎ¯Î¿)",
                stops: "Î£Ï„Î¬ÏƒÎ·: Ca' d'Oro (Ï‡Ï‰ÏÎ¯Ï‚ Î³Î­Ï†Ï…ÏÎµÏ‚)",
                hours: "Î›ÎµÎ¹Ï„Î¿Ï…ÏÎ³ÎµÎ¯ 24 ÏÏÎµÏ‚. (ÎÏ…Ï‡Ï„ÎµÏÎ¹Î½ÏŒ 'N' Î¼ÎµÏ„Î¬ Ï„Î¹Ï‚ 23:30)"
            },
            train: {
                title: "ğŸš… Î¤ÏÎ­Î½Î¿ Î³Î¹Î± Î’ÎµÏÏŒÎ½Î±",
                desc: "Î‘Ï€ÏŒ ÏƒÏ„Î±Î¸Î¼ÏŒ Santa Lucia",
                regional: "Regionale: ~10â‚¬ (1h 28m)",
                fast: "Frecciarossa: ~25â‚¬ (1h 12m)",
                sos: "Î ÏÎ¿ÏƒÎ¿Ï‡Î®! Î¤ÎµÎ»ÎµÏ…Ï„Î±Î¯Î¿ Ï„ÏÎ­Î½Î¿ ÎµÏ€Î¹ÏƒÏ„ÏÎ¿Ï†Î®Ï‚ ~22:00."
            }
        };

        // Î•Î¼Ï†Î¬Î½Î¹ÏƒÎ· Ï„Ï‰Î½ Î´ÎµÎ´Î¿Î¼Î­Î½Ï‰Î½
        const container = document.getElementById('transport-data');
        
        for (const key in transportSchedule) {
            const item = transportSchedule[key];
            const div = document.createElement('div');
            div.style.marginBottom = "15px";
            div.style.padding = "10px";
            div.style.backgroundColor = "white";
            div.style.borderRadius = "8px";
            div.style.boxShadow = "0 2px 4px rgba(0,0,0,0.1)";
            
            div.innerHTML = `
                <h3 style="margin: 0 0 5px 0; font-size: 1.1em;">${item.title}</h3>
                <p style="margin: 0; color: #555;">${item.desc}</p>
                ${item.time ? `<p style="margin: 5px 0 0 0; font-weight: bold;">${item.time}</p>` : ''}
                ${item.stops ? `<p style="margin: 5px 0 0 0;">ğŸ“ ${item.stops}</p>` : ''}
                ${item.hours ? `<p style="margin: 5px 0 0 0; color: darkgreen;">ğŸ•’ ${item.hours}</p>` : ''}
                ${item.sos ? `<p style="margin: 5px 0 0 0; color: red; font-weight: bold;">âš ï¸ ${item.sos}</p>` : ''}
                ${item.note ? `<p style="margin: 5px 0 0 0; font-style: italic; font-size: 0.9em;">â„¹ï¸ ${item.note}</p>` : ''}
            `;
            container.appendChild(div);
        }
    </script>
</div>
</body>
</html>

